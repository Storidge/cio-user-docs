<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Digital Ocean Cloud</title>
    <meta name="description" content="User documentation for Storidge CIO software">
    
    
    <link rel="preload" href="/assets/css/0.styles.34c260e6.css" as="style"><link rel="preload" href="/assets/js/app.e05b9c7f.js" as="script"><link rel="preload" href="/assets/js/26.8b871e95.js" as="script"><link rel="prefetch" href="/assets/js/10.82c0bb7a.js"><link rel="prefetch" href="/assets/js/11.f60b7486.js"><link rel="prefetch" href="/assets/js/12.92564031.js"><link rel="prefetch" href="/assets/js/13.94cac131.js"><link rel="prefetch" href="/assets/js/14.126fd42e.js"><link rel="prefetch" href="/assets/js/15.cd9215ed.js"><link rel="prefetch" href="/assets/js/16.f3160673.js"><link rel="prefetch" href="/assets/js/17.bac0da4d.js"><link rel="prefetch" href="/assets/js/18.cfe5f0e7.js"><link rel="prefetch" href="/assets/js/19.a580bafd.js"><link rel="prefetch" href="/assets/js/2.a74784fd.js"><link rel="prefetch" href="/assets/js/20.bdfdc673.js"><link rel="prefetch" href="/assets/js/21.2de97583.js"><link rel="prefetch" href="/assets/js/22.7069a8b6.js"><link rel="prefetch" href="/assets/js/23.7aea708e.js"><link rel="prefetch" href="/assets/js/24.5ec3c2d0.js"><link rel="prefetch" href="/assets/js/25.2e88b90c.js"><link rel="prefetch" href="/assets/js/27.7bda0b9c.js"><link rel="prefetch" href="/assets/js/28.1456a03c.js"><link rel="prefetch" href="/assets/js/29.e78a0e6b.js"><link rel="prefetch" href="/assets/js/3.652aaa99.js"><link rel="prefetch" href="/assets/js/30.6ac6d22e.js"><link rel="prefetch" href="/assets/js/31.f465c10a.js"><link rel="prefetch" href="/assets/js/32.c650f2c9.js"><link rel="prefetch" href="/assets/js/33.a8705f17.js"><link rel="prefetch" href="/assets/js/34.7a5e2be1.js"><link rel="prefetch" href="/assets/js/35.e4979297.js"><link rel="prefetch" href="/assets/js/36.a088f027.js"><link rel="prefetch" href="/assets/js/37.39d44fed.js"><link rel="prefetch" href="/assets/js/38.c1753ec3.js"><link rel="prefetch" href="/assets/js/39.ca2d0ec3.js"><link rel="prefetch" href="/assets/js/4.a5dbc094.js"><link rel="prefetch" href="/assets/js/40.e9a5ef27.js"><link rel="prefetch" href="/assets/js/41.be51cf9f.js"><link rel="prefetch" href="/assets/js/42.042b7ec2.js"><link rel="prefetch" href="/assets/js/43.61eb9721.js"><link rel="prefetch" href="/assets/js/44.846f8bec.js"><link rel="prefetch" href="/assets/js/45.0cbe395a.js"><link rel="prefetch" href="/assets/js/46.7ab0865a.js"><link rel="prefetch" href="/assets/js/47.9840030e.js"><link rel="prefetch" href="/assets/js/48.da121484.js"><link rel="prefetch" href="/assets/js/49.0dee9f7b.js"><link rel="prefetch" href="/assets/js/5.e2683d3f.js"><link rel="prefetch" href="/assets/js/50.d02e44d8.js"><link rel="prefetch" href="/assets/js/51.9dad44d4.js"><link rel="prefetch" href="/assets/js/52.e69701c3.js"><link rel="prefetch" href="/assets/js/6.c2ad22f6.js"><link rel="prefetch" href="/assets/js/7.e3242b4d.js"><link rel="prefetch" href="/assets/js/8.cc24321b.js"><link rel="prefetch" href="/assets/js/9.276401ad.js">
    <link rel="stylesheet" href="/assets/css/0.styles.34c260e6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://storidge.com/wp-content/uploads/2017/06/logowc2d.png" alt="" class="logo"> <!----></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://storidge.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://storidge.com/api" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/storidge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://storidge.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://storidge.com/api" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/storidge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Get Started</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Docker Volumes</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Kubernetes Storage</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Profiles</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cluster</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cookbook</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Cloud Reference Guide</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/cloud_reference_guide/storidge_on_digitalocean_cloud.html" class="active sidebar-link">Digital Ocean Cloud</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cloud_reference_guide/storidge_on_digitalocean_cloud.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/cloud_reference_guide/storidge_on_digitalocean_cloud.html#download-cio" class="sidebar-link">Download cio</a></li><li class="sidebar-sub-header"><a href="/cloud_reference_guide/storidge_on_digitalocean_cloud.html#get-droplet-key" class="sidebar-link">Get droplet key</a></li><li class="sidebar-sub-header"><a href="/cloud_reference_guide/storidge_on_digitalocean_cloud.html#install-cio-software" class="sidebar-link">Install cio software</a></li><li class="sidebar-sub-header"><a href="/cloud_reference_guide/storidge_on_digitalocean_cloud.html#create-cluster" class="sidebar-link">Create cluster</a></li><li class="sidebar-sub-header"><a href="/cloud_reference_guide/storidge_on_digitalocean_cloud.html#initialize-cluster" class="sidebar-link">Initialize cluster</a></li><li class="sidebar-sub-header"><a href="/cloud_reference_guide/storidge_on_digitalocean_cloud.html#ready-to-use" class="sidebar-link">Ready to use</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>cio commands</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>cioctl commands</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Release Notes</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="digital-ocean-cloud"><a href="#digital-ocean-cloud" aria-hidden="true" class="header-anchor">#</a> Digital Ocean Cloud</h1> <p>This guide shows you how to easily deploy Storidge's Container IO (CIO) software on the DigitalOcean cloud platform. The steps below brings up a storage cluster in a just a few minutes.</p> <h2 id="prerequisites"><a href="#prerequisites" aria-hidden="true" class="header-anchor">#</a> Prerequisites</h2> <p>First, you'll need to setup the cluster resources to orchestrate:</p> <ul><li>A minimum three nodes (aka droplets) are required to form a cluster but four nodes are recommended for improved operating redundancy.</li> <li>Each node will need a minimum of four drives, one for the boot volume and three block storage volumes attached for CIO use. Note that block
storage is only available in regions AMS3, BLR1, FRA1, LON1, NYC1, NYC3, SFO2, SGP1 and TOR1.</li> <li>Private networking enabled for node-to-node networking within a region</li> <li>The ssh key/pem file used to launched the droplets</li></ul> <h2 id="download-cio"><a href="#download-cio" aria-hidden="true" class="header-anchor">#</a> Download cio</h2> <p>Early access to the CIO software is enabled through a ftp account. Use the credentials provided to download the tar package for the desired Linux OS. The following Linux distros are currently supported:</p> <ul><li>Ubuntu 16.04</li> <li>CentOS 7.5</li></ul> <h2 id="get-droplet-key"><a href="#get-droplet-key" aria-hidden="true" class="header-anchor">#</a> Get droplet key</h2> <p>To secure communication among the cluster nodes, the installation script will generate SSH keypairs for the cluster and install on each node. The SSH key
used to the launched the droplets are used to enable initial communication. The SSH key/pem file is
required when creating the cluster the first time and should be removed after.</p> <p>Download the SSH key/pem file to the install directory of each node. You may need to run <code>chmod 600 &lt;ssh key&gt;.pem</code> to set
the correct permissions for the key.</p> <h2 id="install-cio-software"><a href="#install-cio-software" aria-hidden="true" class="header-anchor">#</a> Install cio software</h2> <p>Extract the tar package and install. Example:</p> <div class="language- extra-class"><pre class="language-text"><code>    root@u1:~# tar xvf cio-2275-u16.amd64.txz
    cio-2275-u16.amd64/bin/cio
    ...
    ...
    root@u1:~# cd cio-2275-u16.amd64/
    root@u1:~/cio-2275-u16.amd64# ./install
    Reading package lists... Done
    Building dependency tree
    Reading state information... Done
    ...
    ...
    Status: Downloaded newer image for storidge/cio:latest
    Upgraded plugin cio:latest to docker.io/storidge/cio:latest
    cio
    cio software installation complete. Run 'cioctl create' command on primary node to start a new cluster
</code></pre></div><p><strong>Repeat install</strong></p> <p>Repeat the cio installation on all nodes that will be members of the cluster.</p> <h2 id="create-cluster"><a href="#create-cluster" aria-hidden="true" class="header-anchor">#</a> Create cluster</h2> <p>With the CIO software installed on all nodes, the next step is to create a cluster and then initialize the cluster for use. As part of cluster creation, CIO will automatically discover and add drive resources from each node. Drives that are partitioned or have a file system will not be added to the storage pool.</p> <p>Verify you are in the directory to where the SSH key/pem file is located.</p> <p>Start the CIO cluster with the <code>cioctl create</code> command. Example:</p> <div class="language- extra-class"><pre class="language-text"><code>    root@u1:~# cioctl create
    There are multiple IP addresses on this system (167.99.163.116 on eth0, 10.46.0.6 on eth0, 10.138.136.13 on eth1).
    Re-run the create command by specifying the IP address with the --ip flag, e.g.:
        cioctl create --ip 167.99.163.116 
</code></pre></div><p>The first node where the <code>cioctl create</code> command runs becomes the sds node.</p> <p>When there are multiple network interfaces and IP addresses, the <code>cioctl create</code> command will suggest the first IP address. Use the --ip flag to change to the IP address on the private network, e.g. address on eth1 interface above.</p> <div class="language- extra-class"><pre class="language-text"><code>    root@u1:~# cioctl create --ip 10.138.136.13
    Cluster started. The current node is now the sds controller node. To add a storage node to this cluster, run the following command:
        cioctl join 10.138.136.13 root 01c64a41

    After adding all storage nodes, return to this node and run following command to initialize the cluster:
        cioctl init 01c64a41 
</code></pre></div><p>The output of create includes a command to join new nodes to the cluster. Add new nodes to cluster with the <code>cioctl join</code> command. Example to add new node u2:</p> <div class="language- extra-class"><pre class="language-text"><code>    root@u2:~# cioctl join 10.138.136.13 root 01c64a41
    There are multiple IP addresses on this system (167.99.171.44 on eth0, 10.46.0.7 on eth0, 10.138.216.24 on eth1).
    Re-run the join command by specifying the IP address with the --ip flag, e.g.:
        cioctl join 10.138.136.13 root 01c64a41 --ip 10.138.216.24 
</code></pre></div><p>If there are multiple network interfaces and IP addresses, the <code>cioctl join</code> command will suggest the IP address of the corresponding
network interface.</p> <div class="language- extra-class"><pre class="language-text"><code>    root@u2:~# cioctl join 10.138.136.13 root 01c64a41 --ip 10.138.216.24
    Adding this node to cluster as a storage node
    Using PEM file: ./do-test.pem; This file may be removed after the cluster is created. 
</code></pre></div><p><strong>Join additional nodes</strong></p> <p>Repeat the <code>cioctl join</code> command to add other nodes to the cluster.</p> <h2 id="initialize-cluster"><a href="#initialize-cluster" aria-hidden="true" class="header-anchor">#</a> Initialize cluster</h2> <p>Return to the first node (sds node) and run the <code>cioctl init</code> command to complete setup of the cluster.</p> <div class="language- extra-class"><pre class="language-text"><code>    root@u1:~# cioctl init 01c64a41
    Configuring docker swarm with portainer.
    Using PEM file: ./do-test.pem; This file may be removed after the cluster is created.
    &lt;13&gt;Apr 18 07:25:58 cluster: initialization started
    ...
    ...
    
    &lt;13&gt;Apr 18 07:27:53 cluster: Start cio daemon
    &lt;13&gt;Apr 18 07:28:00 cluster: Succeed: Add vd0: Type:3-copy, Size:20GB
    &lt;13&gt;Apr 18 07:28:01 cluster: MongoDB ready
    &lt;13&gt;Apr 18 07:28:03 cluster: Synchronizing VID files 
</code></pre></div><h2 id="ready-to-use"><a href="#ready-to-use" aria-hidden="true" class="header-anchor">#</a> Ready to use</h2> <p>At the end of initialization, you have a cio cluster running. A Swarm cluster will be automatically configured if one is not already
running. Run the <code>docker node ls</code> command to confirm.</p> <p>In addition, the Portainer UI is launched in a container. Verify with:</p> <div class="language- extra-class"><pre class="language-text"><code>    root@u1:~# docker service ps portainer
    ID NAME IMAGE NODE DESIRED STATE CURRENT STATE ERROR PORTS
    uq66v8w6pcfl portainer.1 portainer/portainer:latest u1 Running Running 5 minutes ago 
</code></pre></div><p>Login to the container management UI by pointing your browser at any node IP and port 9000. You can check the node
IPs with the <code>cio node ls</code> command:</p> <div class="language- extra-class"><pre class="language-text"><code>    root@u1:~# cio node ls
    NODENAME IP NODE_ID ROLE STATUS
    u1 10.138.136.13 c40c92b5 sds normal
    u2 10.138.216.24 d584aa55 backup1 normal
    u3 10.138.232.7 4d31ccf3 backup2 normal
    u4 10.138.180.227 b0632579 standard normal 
</code></pre></div><p>In this example, point the browser at 10.138.136.13:9000, where 9000 is the default Portainer service port number.</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/5/2019, 2:47:29 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/cookbook/cloud_scale_minio_with_cio.html" class="prev">
          Cloud Scale Minio With CIO
        </a></span> <span class="next"><a href="/cio_commands/events.html">
          events
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.e05b9c7f.js" defer></script><script src="/assets/js/26.8b871e95.js" defer></script>
  </body>
</html>
