(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{196:function(e,t,n){"use strict";n.r(t);var o=n(0),a=Object(o.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"add-a-node"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#add-a-node","aria-hidden":"true"}},[e._v("#")]),e._v(" Add a node")]),e._v(" "),n("p",[e._v("You can scale the performance and capacity of a cluster by adding nodes.")]),e._v(" "),n("ol",[n("li",[n("p",[e._v("Open a terminal, ssh into the sds node and run the "),n("code",[e._v("cioctl join-token")]),e._v(" command. This outputs a "),n("code",[e._v("cioctl join")]),e._v(" command, a "),n("code",[e._v("token")]),e._v(" and a "),n("code",[e._v("cioctl add")]),e._v(" command.")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("# cioctl join-token\nIssue a join request to the primary node by running the following command on the new storage node:\n    cioctl join 192.168.1.41 root c1ed56b7\n\nAfter the join request is received, add the new node to the cluster by entering the following command on the primary node:\n    cioctl add c1ed56b7\n")])])]),n("p",[n("strong",[e._v("Note:")]),e._v("  the "),n("code",[e._v("cioctl join-token")]),e._v(" will only run on the sds node. Running the command on a non-sds node will return an error.")])]),e._v(" "),n("li",[n("p",[e._v("Open a terminal, ssh into the storage node to be added. Run the "),n("code",[e._v("cioctl join")]),e._v(" command produced by the "),n("code",[e._v("cioctl join-token")]),e._v(" output to join the storage node (c44 in this example) to the cluster.")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("# cioctl join 192.168.1.41 root c1ed56b7\nThere are multiple IP addresses on this system (192.168.1.44 on ens10f0, 10.10.1.44 on ens10f1, 192.168.122.1 on virbr0).\nRe-run the join command by specifying the IP address with the --ip flag, e.g.:\n    cioctl join 192.168.1.41 root c1ed56b7 --ip 192.168.1.44\n")])])]),n("p",[e._v("On a multi-homed machine, i.e. connected to multiple networks, "),n("code",[e._v("cioctl join")]),e._v(" suggests the first IP address found. You can use the suggested IP address or select a different network interface by changing the IP address after the "),n("code",[e._v("--ip")]),e._v(" flag.")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("# cioctl join 192.168.1.41 root c1ed56b7 --ip 192.168.1.44\nAdding this node to cluster as a storage node\n")])])])]),e._v(" "),n("li",[n("p",[e._v("Return to the sds node and run the "),n("code",[e._v("cioctl add")]),e._v(" command produced by the "),n("code",[e._v("cioctl join-token")]),e._v(" output.")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("# cioctl add c1ed56b7\n<13>Feb 17 10:15:42 cluster: Copy auto-multiNode-c41.cfg to all nodes (NODE_NUMS:4)\n<13>Feb 17 10:15:45 cluster: Initialize target\n...\n...\n<13>Feb 17 10:16:47 node: Initializing metadata\n<13>Feb 17 10:16:52 cluster: Starting cio daemon\n<13>Feb 17 10:16:53 cluster: Starting API\n")])])])]),e._v(" "),n("li",[n("p",[e._v("Run the "),n("code",[e._v("cio nodes")]),e._v(" command to see the new node (c44).")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("# cio nodes\nNODENAME             IP                NODE_ID    ROLE       STATUS\nc41                  192.168.1.41      a49d9ccc   sds        normal\nc42                  192.168.1.42      c236e059   backup1    normal\nc43                  192.168.1.43      06aa2eb7   backup2    normal\nc44                  192.168.1.44      b19dacaf   standard   normal\n")])])])])])])}],!1,null,null,null);t.default=a.exports}}]);