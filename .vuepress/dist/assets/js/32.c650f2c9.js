(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{201:function(e,t,n){"use strict";n.r(t);var r=n(0),s=Object(r.a)({},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[e._m(0),e._v(" "),n("p",[n("a",{attrs:{href:"https://minio.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Minio"),n("OutboundLink")],1),e._v(" is an object storage server compatible with "),n("a",{attrs:{href:"https://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Amazon S3 API"),n("OutboundLink")],1),e._v(". It is suited for storing unstructured data such as photos, videos, log files, backups and container images.")]),e._v(" "),n("p",[e._v("Using CIO volumes with Minio is a great way to setup a highly available S3 compatible cloud storage service for development and testing environments.")]),e._v(" "),n("p",[e._v("In this recipe we use a Docker Stack file to define the Minio service and the CIO volume. Then, using a single command, we can create and launch the Minio instance with highly available persistent storage.")]),e._v(" "),e._m(1),e._v(" "),n("ul",[n("li",[n("p",[e._v("Familiarity with "),n("a",{attrs:{href:"https://docs.docker.com/docker-cloud/apps/stacks/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Stack"),n("OutboundLink")],1),e._v(".")])]),e._v(" "),n("li",[n("p",[e._v("CIO installed on your machine. Install from "),n("a",{attrs:{href:"http://storidge.com/docs/installing-developer-release/",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),n("OutboundLink")],1),e._v(".")]),e._v(" "),n("p",[e._v("â€‹")])])]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._m(4),e._v(" "),n("p",[e._v("To deploy the Minio service on Docker Stack, save the following into a minio.yml file in your current working directory. Docker will pull the Minio image and CIO will create the minio1-data volume using the pre-defined MINIO profile.")]),e._v(" "),e._m(5),n("p",[e._v("Then run command")]),e._v(" "),e._m(6),e._m(7),e._v(" "),e._m(8),n("p",[e._v("In the above example, point the browser at any of the IP addresses, e.g. http://192.168.3.95:9001.")]),e._v(" "),n("p",[e._v('Login in with access key "secret" and secret key "mysecret" configured earlier.')])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"cio-volume-with-minio"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cio-volume-with-minio","aria-hidden":"true"}},[this._v("#")]),this._v(" CIO Volume With Minio")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"prerequisites"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites","aria-hidden":"true"}},[this._v("#")]),this._v(" "),t("strong",[this._v("Prerequisites")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"create-docker-secrets-for-minio"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-docker-secrets-for-minio","aria-hidden":"true"}},[this._v("#")]),this._v(" "),t("strong",[this._v("Create Docker secrets for Minio")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('echo "secret" | docker secret create access_key -\necho "mysecret" | docker secret create secret_key -\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"run-minio-on-docker-stack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run-minio-on-docker-stack","aria-hidden":"true"}},[this._v("#")]),this._v(" "),t("strong",[this._v("Run Minio on Docker Stack")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('version: \'3.1\'\n\nservices:\n  minio1:\n    image: minio/minio\n    volumes:\n      - minio1-data:/export\n    ports:\n      - "9001:9000"\n    networks:\n      - minionet\n    deploy:\n      restart_policy:\n        delay: 10s\n        max_attempts: 10\n        window: 60s\n    command: server /export \n    secrets:\n      - secret_key\n      - access_key\n\nvolumes:\n  minio1-data:\n    driver: cio\n    driver_opts:\n      profile: "MINIO"\n    \nnetworks:\n  minionet:\n    driver: overlay\n\nsecrets:\n  secret_key:\n    external: true\n  access_key:\n    external: true\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("docker stack deploy --compose-file=minio.yml minio\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The Minio instance is now available on the cluster at port 9001 and is accessible from any IP address of the cio cluster. List the node IPs with the "),t("code",[this._v("cio nodes")]),this._v(" command:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ cio nodes\nNODENAME             IP                NODE_ID    ROLE       STATUS\nc1                   192.168.3.95      4132353b   sds        normal\nc2                   192.168.3.53      dceacd20   backup1    normal\nc3                   192.168.3.145     9ee22782   backup2    normal\nc4                   192.168.3.129     d2004822   standard   normal\n")])])])}],!1,null,null,null);t.default=s.exports}}]);