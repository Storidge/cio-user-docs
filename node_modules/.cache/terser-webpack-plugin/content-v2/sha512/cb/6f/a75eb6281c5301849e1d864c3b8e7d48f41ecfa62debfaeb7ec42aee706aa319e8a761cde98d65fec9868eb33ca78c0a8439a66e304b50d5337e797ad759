{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{198:function(e,t,n){\"use strict\";n.r(t);var a=n(0),r=Object(a.a)({},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"content\"},[e._m(0),e._v(\" \"),n(\"p\",[e._v(\"With the CIO software installed on all nodes, you're ready to create a cluster. This guide steps through the creation of a four node cluster which is the minimum number of nodes recommended for a cluster.\")]),e._v(\" \"),n(\"ol\",[e._m(1),e._v(\" \"),e._m(2),e._v(\" \"),n(\"li\",[e._m(3),e._v(\" \"),e._m(4),n(\"p\",[n(\"strong\",[e._v(\"Note:\")]),e._v(\" There is no need to specify storage devices as \"),n(\"code\",[e._v(\"cioctl\")]),e._v(\" automatically discovers and adds unused devices to the storage pool. See \"),n(\"a\",{attrs:{href:\"http://storidge.com/docs/data-drive-requirements/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"data drive requirements\"),n(\"OutboundLink\")],1),e._v(\" for additional details.\")])])]),e._v(\" \"),e._m(5),e._v(\" \"),n(\"p\",[e._v(\"At the end of initialization, you have a four node \"),n(\"a\",{attrs:{href:\"https://docs.docker.com/get-started/part4/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Docker Swarm\"),n(\"OutboundLink\")],1),e._v(\" cluster running. The Swarm cluster will be automatically configured if one is not already running. There are three manager nodes and one worker node. Confirm with:\")]),e._v(\" \"),e._m(6),n(\"p\",[e._v(\"In addition, the \"),n(\"a\",{attrs:{href:\"https://portainer.io/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Portainer UI\"),n(\"OutboundLink\")],1),e._v(\" is launched in a container. Verify with:\")]),e._v(\" \"),e._m(7),e._m(8),e._v(\" \"),e._m(9),n(\"p\",[e._v(\"In this example, point the browser at 192.168.1.43:9000, where 9000 is the default Portainer service port number.\")]),e._v(\" \"),e._m(10),e._v(\" \"),e._m(11),n(\"p\",[e._v(\"This sample output shows 8.7 TB of capacity in the cluster and an IOPS budget of 525K that can be allocated to volumes.\")]),e._v(\" \"),e._m(12),e._v(\" \"),n(\"p\",[n(\"a\",{attrs:{href:\"http://storidge.com/docs/add-a-node/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Add a Node\"),n(\"OutboundLink\")],1)]),e._v(\" \"),n(\"p\",[n(\"a\",{attrs:{href:\"http://storidge.com/docs/remove-a-node/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Remove a Node\"),n(\"OutboundLink\")],1)]),e._v(\" \"),n(\"p\",[n(\"a\",{attrs:{href:\"http://storidge.com/docs/volumes/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Volumes\"),n(\"OutboundLink\")],1)]),e._v(\" \"),n(\"p\",[n(\"a\",{attrs:{href:\"http://storidge.com/docs/volumes-for-containers/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Volumes for Containers\"),n(\"OutboundLink\")],1)]),e._v(\" \"),n(\"p\",[n(\"a\",{attrs:{href:\"http://storidge.com/docs/volumes-for-services/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Volumes for Services\"),n(\"OutboundLink\")],1)]),e._v(\" \"),n(\"p\",[n(\"a\",{attrs:{href:\"http://storidge.com/docs/volumes-docker-compose/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Volumes for Docker Compose\"),n(\"OutboundLink\")],1)])])},[function(){var e=this.$createElement,t=this._self._c||e;return t(\"h1\",{attrs:{id:\"create-a-cluster\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#create-a-cluster\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" Create a Cluster\")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"li\",[n(\"p\",[e._v(\"Open a terminal and ssh into the first machine which will become your sds controller node. This node will be identified as the sds node in the \"),n(\"code\",[e._v(\"cio nodes\")]),e._v(\" command. Run the command below to start a new cluster.\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v(\"cioctl create\\n\")])])]),n(\"p\",[e._v(\"This guide uses a multi-homed machine connected to multiple networks, named \"),n(\"code\",[e._v(\"c41\")]),e._v(\".\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v(\"# cioctl create\\nThere are multiple IP addresses on this system (192.168.1.41 on ens10f0, 10.10.1.41 on ens10f1, 192.168.122.1 on virbr0).\\nRe-run the create command by specifying the IP address with the --ip flag, e.g.:\\n    cioctl create --ip 192.168.1.41\\n\")])])]),n(\"p\",[e._v(\"On a multi-homed machine, \"),n(\"code\",[e._v(\"cioctl\")]),e._v(\" suggests the first IP address found. You can use the suggested IP address or select a different network interface by changing the IP address after the \"),n(\"code\",[e._v(\"--ip\")]),e._v(\" flag.\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v(\"# cioctl create --ip 192.168.1.41\\nCluster started. The current node is now the primary controller node. To add a storage node to this cluster, run the following command:\\n    cioctl join 192.168.1.41 root 395c2eb4\\n\\nAfter adding all storage nodes, return to this node and run following command to initialize the cluster:\\n    cioctl init 395c2eb4\\n\")])])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"li\",[n(\"p\",[e._v(\"Join three nodes to the cluster.\")]),e._v(\" \"),n(\"p\",[e._v(\"Open a terminal, ssh into the nodes to join. Run the \"),n(\"code\",[e._v(\"cioctl join\")]),e._v(\" command produced by the \"),n(\"code\",[e._v(\"cioctl create\")]),e._v(\" output to join nodes (c42, c43 and c44) to the cluster.\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v(\"# cioctl join 192.168.1.41 root 395c2eb4\\nThere are multiple IP addresses on this system (192.168.1.42 on ens10f0, 10.10.1.42 on ens10f1, 192.168.122.1 on virbr0).\\nRe-run the join command by specifying the IP address with the --ip flag, e.g.:\\n    cioctl join 192.168.1.41 root 395c2eb4 --ip 192.168.1.42\\n\")])])]),n(\"p\",[e._v(\"On a multi-homed machine, \"),n(\"code\",[e._v(\"cioctl join\")]),e._v(\" suggests the first IP address found. You can use the suggested IP address or select a different network interface by changing the IP address after the \"),n(\"code\",[e._v(\"--ip\")]),e._v(\" flag.\")]),e._v(\" \"),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v(\"# cioctl join 192.168.1.41 root 395c2eb4 --ip 192.168.1.42\\nAdding this node to cluster as a storage node\\n\")])])]),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v(\"# cioctl join 192.168.1.41 root 395c2eb4 --ip 192.168.1.43\\nAdding this node to cluster as a storage node\\n\")])])]),n(\"div\",{staticClass:\"language- extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[e._v(\"# cioctl join 192.168.1.41 root 395c2eb4 --ip 192.168.1.44\\nAdding this node to cluster as a storage node\\n\")])])]),n(\"p\",[n(\"strong\",[e._v(\"Note:\")]),e._v(\" If you are testing a single-node cluster, skip to the \"),n(\"code\",[e._v(\"cioctl init <token>\")]),e._v(\" command.  There is no need to run the \"),n(\"code\",[e._v(\"cioctl join\")]),e._v(\" command in this case.\")])])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"p\",[this._v(\"Return to the sds controller node and run the \"),t(\"code\",[this._v(\"cioctl init\")]),this._v(\"command to complete initialization of the cluster.\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[this._v(\"# cioctl init 395c2eb4\\n<13>Feb 17 13:40:31 cluster: initialization started\\n<13>Feb 17 13:40:38 cluster: Copy auto-multiNode-c41.cfg to all nodes (NODE_NUMS:4)\\n<13>Feb 17 13:40:59 cluster: Initialize target\\n...\\n<13>Feb 17 13:42:34 cluster: MongoDB ready\\n<13>Feb 17 13:42:37 cluster: Synchronizing VID files\\n<13>Feb 17 13:42:41 cluster: Starting API\\n\")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"h2\",{attrs:{id:\"ready-to-use\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ready-to-use\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" \"),t(\"strong\",[this._v(\"Ready To Use\")])])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[this._v(\"# docker node ls\\nID                            HOSTNAME            STATUS              AVAILABILITY        MANAGER STATUS\\nenugy9ewjzzd5q0nl017s8rdb *   c41                 Ready               Active              Reachable\\nw5qxuxcvkg0lq1vr95hesmwej     c42                 Ready               Active              Leader\\nccth7p2a1mmdkof3oa6j779gj     c43                 Ready               Active              Reachable\\n1o8ntxc0elmb6p7sezyf1fdrl     c44                 Ready               Active\\n\")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[this._v(\"# docker service ps portainer\\nID                  NAME                IMAGE                        NODE                DESIRED STATE       CURRENT STATE                ERROR                              PORTS\\nkhnu6oo01ju1        portainer.1         portainer/portainer:latest   c43                 Running             Running 8 minutes ago                          \\n\")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"p\",[this._v(\"Login to the container management UI by pointing your browser at any node IP and port 9000. You can check the node IPs and status with the \"),t(\"code\",[this._v(\"cio nodes\")]),this._v(\" command.\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[this._v(\"# cio nodes\\nNODENAME             IP                NODE_ID    ROLE       STATUS\\nc41                  192.168.1.41      a49d9ccc   sds        normal\\nc42                  192.168.1.42      c236e059   backup1    normal\\nc43                  192.168.1.43      06aa2eb7   backup2    normal\\nc44                  192.168.1.44      b19dacaf   standard   normal\\n\")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"p\",[this._v(\"Check the cluster performance and capacity resources with the \"),t(\"code\",[this._v(\"cio info\")]),this._v(\" command.\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[this._v(\"# cio info\\nDomain: a49d9ccc\\nDomain ID: e23ed2f9\\n\\nMetadata Version: 1.0\\nNodes: 4\\nVdisks: 2\\nSSDs: 12\\nHDDs: 0\\nTotal capacity: 8.728TB\\nUsed capacity: 0.018TB\\nFree capacity: 8.710TB\\nProvisioned capacity: 0.098TB\\nTotal IOPS: 525561\\nUsed IOPS: 0\\nFree IOPS: 525561\\nProvisioned IOPS: 118\\nTotal bandwidth: 2226.500MB/s\\nUsed bandwidth: 0.000MB/s\\nFree bandwidth: 2226.500MB/s\\nProvisioned bandwidth: 0.524MB/s\\n\\n\")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"h2\",{attrs:{id:\"explore-further\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#explore-further\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" \"),t(\"strong\",[this._v(\"Explore Further\")])])}],!1,null,null,null);t.default=r.exports}}]);","extractedComments":[]}