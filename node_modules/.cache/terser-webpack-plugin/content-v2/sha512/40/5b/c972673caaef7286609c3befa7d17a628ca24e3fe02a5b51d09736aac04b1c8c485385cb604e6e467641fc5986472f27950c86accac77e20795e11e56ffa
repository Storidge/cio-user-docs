{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{204:function(e,t,a){\"use strict\";a.r(t);var i=a(0),s=Object(i.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"content\"},[a(\"h1\",{attrs:{id:\"upgrade-cio-volume-plugin\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#upgrade-cio-volume-plugin\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Upgrade CIO Volume Plugin\")]),e._v(\" \"),a(\"p\",[e._v(\"This guide shows the steps to upgrade the CIO docker volume plugin. Run the command sequence below on all nodes in the cluster.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"list-the-plugin\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#list-the-plugin\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" List the plugin\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"# docker plugin ls\\nID                  NAME                DESCRIPTION                                ENABLED\\n663a4acd7b35        cio:latest          Storidge's ContainerIO plugin for Docker   true\\n\")])])]),a(\"p\",[e._v(\"If the volume plugin shows as enabled, disable the plugin first to proceed.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"disable-the-plugin\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#disable-the-plugin\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Disable the plugin\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"# docker plugin disable cio\\n\")])])]),a(\"p\",[e._v('If you get the error \"plugin cio:latest is in use\", use the -f or --force flag.')]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"# docker plugin disable cio -f\\n\")])])]),a(\"p\",[e._v(\"Using the \"),a(\"code\",[e._v(\"-f\")]),e._v(\" flag could be disruptive to applications. See the section below for a non-disruptive upgrade.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"upgrade-the-plugin\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#upgrade-the-plugin\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Upgrade the plugin\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"# docker plugin upgrade cio\\n\")])])]),a(\"p\",[e._v(\"Example\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v('# docker plugin upgrade cio\\nUpgrading plugin cio:latest from storidge/cio:latest to storidge/cio:latest\\nPlugin \"docker.io/storidge/cio:latest\" is requesting the following privileges:\\n - network: [host]\\n - mount: [/dev]\\n - allow-all-devices: [true]\\n - capabilities: [CAP_SYS_ADMIN]\\nDo you grant the above permissions? [y/N] y\\nlatest: Pulling from storidge/cio\\nfa1b662ea6b3: Download complete\\nDigest: sha256:d8666480fc9ae8beba283dd60b8b3b387b4afeef727e5a82b8ad573b4b808b87\\nStatus: Downloaded newer image for storidge/cio:latest\\nUpgraded plugin cio:latest to docker.io/storidge/cio:latest\\n')])])]),a(\"h2\",{attrs:{id:\"enable-the-plugin\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#enable-the-plugin\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Enable the plugin\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"# docker plugin enable cio\\n\")])])]),a(\"h2\",{attrs:{id:\"non-disruptive-plugin-upgrade\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#non-disruptive-plugin-upgrade\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Non-disruptive plugin upgrade\")]),e._v(\" \"),a(\"p\",[e._v(\"Note that using the  \"),a(\"code\",[e._v(\"-f\")]),e._v(\" or \"),a(\"code\",[e._v(\"--force\")]),e._v(\" flag could be disruptive to the containerized application on an operating cluster, e.g. the Docker propagated mount point could be removed.\")]),e._v(\" \"),a(\"p\",[e._v(\"An alternative way to update the plugin is to first set the cio nodes to drain state, update the plugin and then set the cio nodes back to active state to continue operation, i.e.:\")]),e._v(\" \"),a(\"ol\",[a(\"li\",[e._v(\"Run \"),a(\"code\",[e._v(\"docker node update --availability drain <cio node name>\")]),e._v(\" to set each node to drain state\")]),e._v(\" \"),a(\"li\",[e._v(\"Use the disable, upgrade and enable plugin commands above to update the volume plugin\")]),e._v(\" \"),a(\"li\",[e._v(\"Run  \"),a(\"code\",[e._v(\"docker node update --availability active <cio node name>\")]),e._v(\" to set each node back to active state\")])])])}],!1,null,null,null);t.default=s.exports}}]);","extractedComments":[]}